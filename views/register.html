<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width" />
    <title>注册</title>
    <link rel="stylesheet" href="../static/font-awesome/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="../static/layui/css/layui.css"/>
    <link rel="stylesheet" href="../static/css/master.css"/>
    <link rel="stylesheet" href="../static/css/gloable.css"/>
    <link rel="stylesheet" href="../static/css/nprogress.css"/>
    <link rel="stylesheet" href="../static/css/about.css"/>
    <link rel="stylesheet" href="../static/css/login.css"/>
</head>
<body>
    <div class="header">
    </div>
    <header class="gird-header">
        <div class="header-fixed">
            <div class="header-inner">
                <a href="#" class="header-logo" id="logo">Lee's Blog</a>
                <nav class="nav" id="nav">
                    <ul>
                        <li><a href="/" >首页</a></li>
                        <li><a href="/article/list">博客</a></li>
                        <li><a href="/message/edit">留言</a></li>
						<li><a href="/diary/list">日记</a></li>
                        <li><a href="#">友链</a></li>
                    </ul>
                </nav>
                <a class="blog-user" href="/account/login">
					<i class="layui-icon layui-icon-username" style="font-size: 30px;"></i>
                </a>
                <!-- <ul class="layui-nav layui-layout-right">
                    <li class="layui-nav-item">
                        <a><img src="../static/image/a4.png" class="layui-nav-img">{{.adminName}}</a>
                        <dl class="layui-nav-child">
                            <dd>
                                <a href="/account/logout">退出登录</a>
                            </dd>
                        </dl>
                    </li>
                </ul> -->
                <a class="phone-menu">
                    <i></i>
                    <i></i>
                    <i></i>
                </a>
            </div>
        </div>
    </header>
    <div class="bg-container">
        <div class="container">
            <div class="layui-form-mid layui-word-aux login-title">
                注册
            </div>
            <form class="layui-form" action="" method="post">
                <div class="layui-form-item">
                    <div class="layui-input-inline">
                        <input type="text" name="username" required lay-verify="required"
                                placeholder="请输入用户名(4-8位，字母和数字)" autocomplete="off" class="layui-input" id="username">
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-inline">
                        <input type="password" name="password1" required lay-verify="required"
                                placeholder="请输入密码(6-10位，字母和数字)" autocomplete="off" class="layui-input" id="password1">
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-inline">
                        <input type="password" name="password2" required lay-verify="required"
                                placeholder="确认密码" autocomplete="off" class="layui-input" id="password2">
                    </div>
                </div>
                <!-- 验证码 -->
                <div class="layui-form-item">
                    <div style="margin-top:10px;">
                        <!-- 图片 -->
                        <div style="float: left;">
                            {{create_captcha}}
                        </div>
                        <div style="float: left;margin-left: 50px;">
                            <input name="captcha" type="text" class="layui-input" lay-verify="required" style="width: 160px;" placeholder="请输入验证码">   
                        </div>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-inline">
                        <button class="layui-btn " lay-submit lay-filter="register" type="submit">注册</button>
                    </div>
                </div>
            </form>
        </div>    
    </div>
    <footer class="grid-footer" style="margin-top:0px;">
        <div class="footer-fixed">
            <div class="copyright">
                <div class="info">
                    <div class="contact">
                        <a href="javascript:void(0)" class="github" target="_blank"><i class="fa fa-github"></i></a>
                        <a href="https://wpa.qq.com/msgrd?v=3&uin=930054439&site=qq&menu=yes" class="qq" target="_blank" title="930054439"><i class="fa fa-qq"></i></a>
                        <a href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=gbiysbG0tbWyuMHw8K-i7uw" class="email" target="_blank" title="930054439@qq.com"><i class="fa fa-envelope"></i></a>
                        <a href="javascript:void(0)" class="weixin"><i class="fa fa-weixin"></i></a>
                    </div>
                    <p class="mt05">
                         Copyright &copy; 2020-2021 Lee博客 All Rights Reserved V.3.1.3 Power by Lee博客
                    </p>
                </div>
            </div>
        </div>
    </footer>
	<script src="../static/layui/layui.js"></script>
    <script src="../static/js/yss/gloable.js"></script>
    <script src="../static/js/plugins/nprogress.js"></script>
    <script>NProgress.start();</script>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
 	<script src="../static/js/plugins/blogbenoitboucart.min.js"></script>
    <script> 
        window.onload = function () {
            NProgress.done();
        };
        layui.use(['form','element','layer','jquery'], function(){
            var form = layui.form;
            var $ = layui.jquery;
            var layer = layui.layer;
            //注册
            form.on('submit(register)', function(){
                var form_data = $("form").serialize();
                $.ajax({
                    url: '/account/register',
                    type: 'POST',
                    datatype: 'json',
                    data: form_data,
                    async: false,
                    cache: false,
                    success: function(res){
                        if (res.code === 0) {
                            layer.alert(res.msg);
                            setTimeout(function(){
                                window.location.href = "/account/loginpage";
                            }, 1000);
                        } else {
                            layer.alert(res.msg);
                        }
                    }
                });
                return false;
            });
            setTimeout(function(){
                form.render();
            }, 1500);
        });
    </script>
</body>
</html>